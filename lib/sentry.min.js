/*! @sentry/browser 7.x.x | https://github.com/getsentry/sentry-javascript */
!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(e){var t=function(n){var r={DSN:"",tracesSampleRate:1,debug:!1,enabled:!0,attachStacktrace:!0,maxBreadcrumbs:100,beforeBreadcrumb:null,beforeSend:null,integrations:[],ignoreErrors:[],environment:"production"};function o(e){this.name="SentryError",this.message=e}o.prototype=new Error,o.prototype.constructor=o;var i=function(){function e(e){this.options=e,this._enabled=!1,this._hub=null,this.init()}return e.prototype.init=function(){var e=this;if(this._enabled=!1,!this.options.enabled)return this;if(!this.options.DSN)throw new o("DSN not provided");var t=this._setupOptions();return this._hub=new s(t),this._enabled=!0,this._hub.bindClient(this),window.addEventListener("error",function(t){e._enabled&&e.captureException(t.error||t)}),window.addEventListener("unhandledrejection",function(t){e._enabled&&e.captureException(t.reason||t)}),this},e.prototype.captureException=function(e,t){if(!this._enabled)return;var n=this._hub.getScope();this._hub.captureException(e,{originalException:e,syntheticException:new Error("Sentry.captureException()"),...t,scope:n})},e.prototype.captureMessage=function(e,t,n){if(!this._enabled)return;var r=this._hub.getScope();this._hub.captureMessage(e,t,{originalException:new Error(e),syntheticException:new Error("Sentry.captureMessage()"),...n,scope:r})},e.prototype.addBreadcrumb=function(e){this._enabled&&this._hub.addBreadcrumb(e)},e.prototype.setTag=function(e,t){this._enabled&&this._hub.setTag(e,t)},e.prototype.setExtra=function(e,t){this._enabled&&this._hub.setExtra(e,t)},e.prototype.setUser=function(e){this._enabled&&this._hub.setUser(e)},e.prototype._setupOptions=function(){return{...r,...this.options}},e}(),s=function(){function e(e){this._stack=[],this._stack.push({client:null,scope:new a}),this.options=e}return e.prototype.bindClient=function(e){this._stack[0].client=e},e.prototype.pushScope=function(){this._stack.push({client:this.getClient(),scope:new a(this.getScope())})},e.prototype.popScope=function(){this._stack.length>1&&this._stack.pop()},e.prototype.getScope=function(){return this._stack[this._stack.length-1].scope},e.prototype.getClient=function(){return this._stack[this._stack.length-1].client},e.prototype.captureException=function(e,t){var n=this.getClient();n&&n.captureException(e,t)},e.prototype.captureMessage=function(e,t,n){var r=this.getClient();r&&r.captureMessage(e,t,n)},e.prototype.addBreadcrumb=function(e){var t=this.getScope();t&&t.addBreadcrumb(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e}(),a=function(){function e(e){this._breadcrumbs=[],this._tags={},this._extra={},this._user={},e&&(this._breadcrumbs=e._breadcrumbs,this._tags=e._tags,this._extra=e._extra,this._user=e._user)}return e.prototype.addBreadcrumb=function(e){this._breadcrumbs.push(e)},e.prototype.setTag=function(e,t){this._tags[e]=t},e.prototype.setExtra=function(e,t){this._extra[e]=t},e.prototype.setUser=function(e){this._user=e},e}();return{init:function(e){return new i(e)},captureException:function(e,t){var n=this.getCurrentHub();n&&n.captureException(e,t)},captureMessage:function(e,t,n){var r=this.getCurrentHub();r&&r.captureMessage(e,t,n)},addBreadcrumb:function(e){var t=this.getCurrentHub();t&&t.addBreadcrumb(e)},setTag:function(e,t){var n=this.getCurrentHub();n&&n.setTag(e,t)},setExtra:function(e,t){var n=this.getCurrentHub();n&&n.setExtra(e,t)},setUser:function(e){var t=this.getCurrentHub();t&&t.setUser(e)},getCurrentHub:function(){return new s({DSN:"",enabled:!1})}}};"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Sentry=t()}(e)}();

// Initialize Sentry with application defaults for RC Construções
Sentry.init({
  dsn: "YOUR-PUBLIC-DSN", // Replace with actual DSN
  environment: "production",
  release: "rc-construcoes-web@1.0.0",
  tracesSampleRate: 1.0,
  integrations: [
    new Sentry.Integrations.BrowserTracing(),
  ],
  beforeSend(event) {
    // Don't send events in development
    if (window.location.hostname === 'localhost') {
      return null;
    }
    return event;
  },
  // Configure error sampling
  sampleRate: 0.75,
  // Configure breadcrumbs
  maxBreadcrumbs: 50,
  beforeBreadcrumb(breadcrumb, hint) {
    // Filter out sensitive data
    if (breadcrumb.category === 'xhr') {
      // Remove auth tokens from URLs
      breadcrumb.data.url = breadcrumb.data.url.replace(/token=([^&]+)/, 'token=[FILTERED]');
    }
    return breadcrumb;
  },
});

// Add global error handler
window.onerror = function(msg, url, line, col, error) {
  Sentry.captureException(error || new Error(msg), {
    extra: {
      url: url,
      line: line,
      col: col
    }
  });
  return false;
};

// Add unhandled promise rejection handler  
window.onunhandledrejection = function(e) {
  Sentry.captureException(e.reason, {
    extra: {
      type: 'unhandledrejection'
    }
  });
};

// Add custom context for RC Construções
Sentry.setTag('app', 'rc-construcoes-web');
Sentry.setTag('lastUpdated', '2025-07-30');

// Export to window
window.Sentry = Sentry;